<div class="smart-popup" *ngIf="product && isVisible" [class.show]="isVisible" [class.flash-deal]="isFlashDeal">
    <button class="close-btn" (click)="closePopup()">Ã—</button>

    <div class="popup-content" (click)="navigateToProduct()">
        <div class="popup-image">
            <img [src]="getProductImage()" alt="{{product.name}}">
        </div>

        <div class="popup-details">
            <span class="popup-tag flash-tag" *ngIf="isFlashDeal">âš¡ Flash Deal</span>
            <span class="popup-tag" *ngIf="isTrending && !isFlashDeal">ðŸ”¥ Trending</span>
            <span class="popup-tag low-stock" *ngIf="isLowStock && !isFlashDeal">âš¡ Fast Selling</span>

            <h4 class="product-name">{{product.name}}</h4>
            <p class="product-brand">{{product.brandName}}</p>

            <div class="price-row" *ngIf="product.variants[0] as v">
                <span class="price">
                    â‚¹{{(isFlashDeal && v.salePrice) ? v.salePrice : v.price}}
                </span>
                <span class="original-price" *ngIf="v.salePrice && v.salePrice < v.price">
                    â‚¹{{v.price}}
                </span>
            </div>

            <button class="view-btn">View Details</button>
        </div>
    </div>
</div>