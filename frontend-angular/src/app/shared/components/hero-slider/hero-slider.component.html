<div class="hero-container" [class.loading]="loading()">
    @if (loading()) {
    <div class="loader-overlay">
        <mat-spinner diameter="50" color="warn"></mat-spinner>
    </div>
    } @else if (products().length > 0) {
    <div class="hero-section-wrapper">
        <div class="container py-4">
            <div class="row g-4">
                <!-- Main Slider (Always Full Width now) -->
                <div class="col-12" *ngIf="products().length > 0">
                    <div class="hero-main shadow-lg">
                        <div class="slider-box" *ngFor="let product of products(); let i = index"
                            [hidden]="currentIndex() !== i">
                            <div class="slide-item">
                                <div class="hero-content">
                                    <div class="glass-container">
                                        <span class="category-tag">EXCLUSIVE</span>
                                        <h1 class="product-title">{{product.name}}</h1>
                                        <div class="price-badge">
                                            <span class="label">Starting at</span>
                                            <span class="amount">â‚¹{{product.price}}</span>
                                        </div>
                                        <button mat-flat-button class="shop-btn"
                                            [routerLink]="['/product', product.modelNo]">
                                            <span class="desktop-text">SHOP THE COLLECTION</span>
                                            <span class="mobile-text">SHOP NOW</span>
                                        </button>
                                    </div>
                                </div>
                                <div class="hero-image-wrapper">
                                    <img [src]="product.variants?.[0]?.images?.[0]?.id ? environment.apiUrl + '/images/' + product.variants[0].images[0].id : environment.apiUrl + '/images/product/' + product.modelNo + '/1'"
                                        [alt]="product.name" class="hero-image"
                                        (error)="$event.target.src='https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800'">
                                    <div class="image-reflection"></div>
                                </div>
                            </div>
                        </div>

                        <div class="pagination-dots">
                            <span class="dot" *ngFor="let p of products(); let i = index"
                                [class.active]="currentIndex() === i" (click)="setIndex(i)"></span>
                        </div>
                    </div>
                </div>


                <button class="explore-btn" (click)="$event.stopPropagation(); handleShopNow(deal)">
                    SHOP THE DEAL
                    <mat-icon>trending_flat</mat-icon>
                </button>

                <!-- Side Slider Pagination -->
                <div class="side-pagination" *ngIf="flashDeals().length > 1">
                    <span class="mini-dot" *ngFor="let p of flashDeals(); let i = index"
                        [class.active]="sideIndex() === i" (click)="$event.stopPropagation(); setSideIndex(i)"></span>
                </div>
            </div>
        </div>
    </div>
    }
</div>